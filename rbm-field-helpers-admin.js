!function(a){"use strict";a(function(){function b(a,b){var d=b.find(".rbm-field-colorpicker");d.find('input[name^="_rbm_repeater"]').appendTo(b.find("label")),d.find(".wp-picker-container").remove(),c(d)}function c(b){b.each(function(){a(this).find('input[type="text"]').wpColorPicker(a(this).data())})}var d=a(".rbm-field-colorpicker"),e=a(".rbm-field-repeater");d.length&&c(d),e.length&&e.on("add-item",b)})}(jQuery),function(a){"use strict";a(function(){function b(b,d){var e=a(".rbm-field-datepicker");e.find('input[type="text"]').removeClass("hasDatepicker").removeAttr("id"),c(e)}function c(b){b.each(function(){var b=a(this).find('input[type="hidden"]').attr("name"),c="#rbm-field-datepicker-input-"+b,d=["beforeShow","beforeShowDay","calculateWeek","onChangeMonthYear","onClose","onSelect"],e={};RBM_FieldHelpers["datepicker_args_"+b]&&(e=RBM_FieldHelpers["datepicker_args_"+b]),a.each(e,function(a,b){-1!==d.indexOf(a)&&(e[a]=window[b])}),e.altField=c,e.altFormat="yymmdd",a(this).find(".rbm-field-datepicker-preview").datepicker(e)})}var d=a(".rbm-field-datepicker"),e=a(".rbm-field-repeater");d.length&&c(d),e.length&&e.on("add-item",b)})}(jQuery),function(a){"use strict";window.rbm_instantiate_media_uploaders=function(){var b,c;wp.media&&(b=wp.media.frames.meta_image_frame=wp.media({title:"Choose Media"}),b.on("select",function(){var a=b.state().get("selection").first().toJSON();switch(c.find(".media-id").val(a.id),c.find(".upload-media").hide(),c.find(".remove-media").show(),c.data("type")){case"image":c.find(".image-preview").attr("src",a.url);break;default:c.find(".media-url").html(a.url)}}),a(document).on("click",".rbm-media-uploader .upload-media",function(d){d.preventDefault(),c=a(this).closest(".rbm-media-uploader");c.data("type");b.open()}),a(document).on("click",".rbm-media-uploader .remove-media",function(b){switch(a(this).siblings(".upload-media").show(),a(this).hide(),a(this).siblings(".media-id").val(""),c=a(this).closest(".rbm-media-uploader"),c.data("type")){case"image":var d=a(this).siblings(".image-preview");d.attr("src",d.data("placeholder")||"");break;default:var e=a(this).siblings(".media-url");e.html(e.data("placeholder")||"&nbsp;")}c=!1}))},a(rbm_instantiate_media_uploaders)}(jQuery),function(a){"use strict";a(function(){function b(b){var c=b.find("select.rbm-select2");c.each(function(){var b=a(this).siblings(".select2-container");b.length&&b.remove(),a(this).show().select2()})}a(".rbm-field-repeater").each(function(){var c=a(this).find(".rbm-field-repeater-list"),d=c.data("repeater-list");a(this).repeater({show:function(){a(this).slideDown(),b(a(this)),a(this).trigger("add-item",[a(this)])},hide:function(){confirm("Are you sure you want to delete this element?")&&(a(this).slideUp(400,function(){a(this).remove()}),a(this).trigger("delete-item",[a(this)]))},isFirstItemUndeletable:!0}),c.sortable({axis:"y",handle:".rbm-field-repeater-handle",forcePlaceholderSize:!0,placeholder:"rbm-sortable-placeholder",update:function(b,e){c.find(".rbm-field-repeater-row").each(function(){a(this).find("input, select, textarea").filter('[name^="'+d+'"]').each(function(){var b=a(this).closest(".rbm-field-repeater-row").index(),c=a(this).attr("name"),e=new RegExp("("+d+"\\[)\\d(\\]\\[.*?\\])","i");a(this).attr("name",c.replace(e,"$1"+b+"$2"))})}),c.trigger("list-update",[a(this).closest(".rbm-field-repeater")])}}),a(this).find(".rbm-field-repeater-row.dummy").remove()})})}(jQuery),function(a){"use strict";a(function(){function b(b){b.each(function(){var b=a(this),e=a(this).find("table");e.find("thead th").first().find("[data-table-delete-column]").prop("disabled",!0),e.find("tbody tr").first().find("[data-table-delete-row]").prop("disabled",!0),e.find("tbody").sortable({axis:"y",handle:".rbm-field-table-sort",update:d}),a(this).find("[data-table-create-row]").click(function(){var d=a(this).closest(".rbm-field-table").find("table"),e=d.find("tbody tr").first().clone(!0,!0);e.find("[data-table-delete-row]").prop("disabled",!1),e.find('input[type="text"]').val(""),d.find("tbody").append(e),c(b)}),a(this).find("[data-table-create-column]").click(function(){var d=a(this).closest(".rbm-field-table").find("table"),e=d.find("thead th").first().clone(!0,!0),f=d.find("tbody td").first().clone(!0,!0);e.find('input[type="text"]').val(""),e.find("[data-table-delete-column]").prop("disabled",!1),f.find('input[type="text"]').val(""),d.find("thead tr th:last-of-type").before(e),d.find("tbody tr td:last-of-type").before(f),c(b)}),a(this).find("[data-table-delete-row]").click(function(){a(this).closest("tr").remove(),c(b)}),a(this).find("[data-table-delete-column]").click(function(){var d=a(this).closest("table"),e=a(this).closest("th").index();d.find("th:nth-child("+(e+1)+")").remove(),d.find("td:nth-child("+(e+1)+")").remove(),c(b)})})}function c(b){b.each(function(){a(this).find("thead th").each(function(){if(a(this).hasClass("actions"))return!0;var b=a(this).index(),c=a(this).find('input[type="text"]').attr("name"),d="["+b+"]";a(this).find('input[type="text"]').attr("name",c.replace(/\[\d]/,d))}),a(this).find("tbody td").each(function(){if(a(this).hasClass("actions"))return 0===a(this).closest("tr").index()?a(this).find("[data-table-delete-row]").prop("disabled",!0):a(this).find("[data-table-delete-row]").prop("disabled",!1),!0;var b=a(this).closest("tr").index(),c=a(this).index(),d=a(this).find('input[type="text"]').attr("name"),e="["+b+"]["+c+"]";a(this).find('input[type="text"]').attr("name",d.replace(/\[\d]\[\d]/,e))})})}function d(a,b,d){c(b.item)}var e=a(".rbm-field-table");e.length&&b(e)})}(jQuery),function(a,b){"use strict";function c(){d(),l.length&&(r=l.data("post-id"),e())}function d(){l=a("#rbm-field-user-keys[data-ajax]"),l.length&&(m=l.find(".rbm-user-keys-container"),n=l.find("table.rbm-user-keys"),o=l.find("[data-user-key-add]"),q=l.find("[data-user-key-delete-all]"),p=l.find('[name="_rbm_new_user_email"]'))}function e(){o.click(f),l.on("click","[data-user-key-delete]",g),q.click(h),p.keypress(k)}function f(){var c=l.find('[name="_rbm_new_user_email"]').val(),d=l.find('.rbm-user-keys-input-error[data-input="_rbm_new_user_email"]');return c.length?(d.hide(),void a.post(ajaxurl,{action:b.userkeys_ajax_add_user_action,rbm_field_helpers_nonce:b.nonce,email:c,post_ID:r},function(a){"success"==a.status?(i(a.user_email,a.user_key,a.edit_link),p.val("")):"fail"==a.status&&a.error_msg&&alert(a.error_msg)})):void d.show()}function g(c){var d=a(this).data("email");c.preventDefault(),confirm("Are you sure you want to delete this user?")&&a.post(ajaxurl,{action:b.userkeys_ajax_delete_user_action,rbm_field_helpers_nonce:b.nonce,post_ID:r,email:d},function(a){"success"==a.status?j(a.user_email):"fail"==a.status&&a.error_msg&&alert(a.error_msg)})}function h(c){c.preventDefault(),confirm("Are you sure you want to delete ALL users?")&&a.post(ajaxurl,{action:b.userkeys_ajax_delete_users_action,rbm_field_helpers_nonce:b.nonce,post_ID:r},function(a){"success"==a.status?m.fadeOut(300,function(){n.find("tbody tr:not([data-template])").remove()}):"fail"==a.status&&a.error_msg&&alert(a.error_msg)})}function i(a,b,c){var d=n.find("tr[data-template]").clone();d.removeAttr("data-template"),d.attr("data-email",a),d.find("[data-user-email]").text(a),d.find("[data-user-link]").text(c).attr("href",c),d.find("[data-user-key-delete]").attr("data-email",a),n.find("tbody tr:not([data-template])").length||m.fadeIn(),n.find("tbody").append(d),d.fadeIn()}function j(b){n.find('tr[data-email="'+b+'"]').fadeOut(300,function(){a(this).remove(),n.find("tbody tr:not([data-template])").length||m.fadeOut()})}function k(a){"13"==a.charCode&&(a.preventDefault(),o.click())}var l,m,n,o,p,q,r;a(c)}(jQuery,RBM_FieldHelpers),function(a){"use strict";function b(b){var c=a(b[0]).closest(".rbm-field-repeater-list").data("repeater-list"),d=new RegExp("("+c+"_)\\d(_.*?)","i");b.each(function(b,e){var f=a(e).attr("data-id").replace(d,"$1"+b+"$2");a(e).attr("data-id",f),a(e).find(".button").each(function(){a(this).data("editor")&&(a(this).attr("data-editor","_rbm_"+f),a(this).data("editor","_rbm_"+f))}),a(e).find("[id*="+c+"]").each(function(){a(this).attr("id",a(this).attr("id").replace(d,"$1"+b+"$2")),a(this).data("wp-editor-id")&&a(this).attr("data-wp-editor-id","_rbm_"+f)});var g=a(e).find("textarea.wp-editor-area");tinymce.init({selector:g.attr("id"),plugins:"charmap,colorpicker,hr,lists,media,paste,tabfocus,textcolor,fullscreen,wordpress,wpautoresize,wpeditimage,wpemoji,wpgallery,wplink,wpdialogs,wptextpattern,wpview,wpembed",content_css:"/wp-includes/css/dashicons.css,/wp-includes/js/tinymce/skins/wordpress/wp-content.css",menubar:!1,toolbar1:"bold,italic,underline,blockquote,strikethrough,bullist,numlist,alignleft,aligncenter,alignright,undo,redo,link,unlink,fullscreen",toolbar2:"",toolbar3:"",toolbar4:""}),tinymce.execCommand("mceAddEditor",!1,g.attr("id")),quicktags({id:g.attr("id"),buttons:"strong,em,link,block,del,ins,img,ul,ol,li,code,more,close"})})}function c(a,c){var d=c.parent().find(".rbm-field-wysiwyg");d.length&&b(d)}a(function(){var b=a(".rbm-field-repeater");b.length&&b.on("add-item list-update",c)})}(jQuery);
//# sourceMappingURL=rbm-field-helpers-admin.js.map